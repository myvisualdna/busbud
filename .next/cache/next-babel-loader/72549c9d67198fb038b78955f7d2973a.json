{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Table from \"react-bootstrap/Table\";\nimport Form from \"react-bootstrap/Form\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport FetchAction from \"../redux/actions/fetchAction\";\nimport Moment from \"react-moment\";\nimport \"moment-timezone\";\nimport DatePicker from \"react-datepicker\";\nimport styles from \"../styles/mainStyles.module.scss\";\n\nfunction ResultTable() {\n  //1. We call \"useDispatch\" (React hook) to trigger our request petition\n  var dispatch = useDispatch(); //2. We define a function that combines dispatch function + redux action\n\n  var getFirstFetch = function getFirstFetch(date) {\n    return dispatch(FetchAction(date));\n  }; //Selectors\n\n\n  var oneFetch = useSelector(function (state) {\n    return state.firstFetch.mainInformation;\n  });\n  var departuresFetch = useSelector(function (state) {\n    return state.firstFetch.allDepartures.departures;\n  }); //DatePicker\n\n  var _useState = useState(new Date()),\n      startDate = _useState[0],\n      setStartDate = _useState[1];\n\n  function formatDate(date) {\n    var d = new Date(date),\n        month = \"\" + (d.getMonth() + 1),\n        day = \"\" + d.getDate(),\n        year = d.getFullYear();\n    if (month.length < 2) month = \"0\" + month;\n    if (day.length < 2) day = \"0\" + day;\n    return [year, month, day].join(\"-\");\n  } //Setting up Search Action\n\n\n  var onFormSubmit = function onFormSubmit(date, e) {\n    setStartDate(date);\n    getFirstFetch(formatDate(date));\n  }; //Setting up useEffect Hook for the first render\n\n\n  useEffect(function (startDate, e) {\n    var today = formatDate(new Date());\n    getFirstFetch(today);\n  }, []);\n  return /*#__PURE__*/_jsxs(Container, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: styles.bigSquare,\n      children: /*#__PURE__*/_jsx(Form, {\n        onSubmit: onFormSubmit,\n        children: /*#__PURE__*/_jsx(Form.Group, {\n          children: /*#__PURE__*/_jsxs(Form.Row, {\n            children: [/*#__PURE__*/_jsxs(Col, {\n              children: [/*#__PURE__*/_jsx(Form.Label, {\n                className: styles.labelStyle,\n                children: \"Select Origin\"\n              }), /*#__PURE__*/_jsxs(Form.Control, {\n                className: styles.inputStyle,\n                as: \"select\",\n                children: [/*#__PURE__*/_jsx(\"option\", {\n                  children: \"Quebec City, QC, Canada\"\n                }), /*#__PURE__*/_jsx(\"option\", {\n                  children: \"Montreal, QC, Canada\"\n                })]\n              })]\n            }), /*#__PURE__*/_jsxs(Col, {\n              children: [/*#__PURE__*/_jsx(Form.Label, {\n                className: styles.labelStyle,\n                children: \"Select Destination\"\n              }), /*#__PURE__*/_jsxs(Form.Control, {\n                className: styles.inputStyle,\n                as: \"select\",\n                children: [/*#__PURE__*/_jsx(\"option\", {\n                  children: \"Montreal, QC, Canada\"\n                }), /*#__PURE__*/_jsx(\"option\", {\n                  children: \"Quebec City, QC, Canada\"\n                })]\n              })]\n            }), /*#__PURE__*/_jsxs(Col, {\n              className: styles.datePick,\n              children: [/*#__PURE__*/_jsx(Form.Label, {\n                className: styles.labelStyle,\n                children: \"Select Date\"\n              }), /*#__PURE__*/_jsx(DatePicker, {\n                className: styles.dateBorder,\n                selected: startDate,\n                onChange: onFormSubmit,\n                name: \"date\",\n                dateFormat: \"yyyy/MM/dd\"\n              })]\n            })]\n          })\n        })\n      })\n    }), /*#__PURE__*/_jsxs(Table, {\n      className: styles.bigTable,\n      responsive: true,\n      bordered: true,\n      hover: true,\n      children: [/*#__PURE__*/_jsx(\"thead\", {\n        children: /*#__PURE__*/_jsxs(\"tr\", {\n          children: [/*#__PURE__*/_jsx(\"th\", {\n            children: \"Departure Time\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"Arrival Time\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"Price\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"Origin\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            children: \"Destination\"\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"tbody\", {\n        children: departuresFetch === null || departuresFetch === void 0 ? void 0 : departuresFetch.map(function (depart, i) {\n          return /*#__PURE__*/_jsxs(\"tr\", {\n            children: [/*#__PURE__*/_jsx(\"td\", {\n              children: /*#__PURE__*/_jsx(Moment, {\n                format: \"MMMM Do YYYY, h:mm:ss a\",\n                date: depart.departure_time\n              })\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: /*#__PURE__*/_jsx(Moment, {\n                format: \"MMMM Do YYYY, h:mm:ss a\",\n                date: depart.arrival_time\n              })\n            }), /*#__PURE__*/_jsxs(\"td\", {\n              children: [depart.prices.total, \" \", depart.prices.currency]\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: oneFetch.cities[0].short_name\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: oneFetch.cities[1].short_name\n            })]\n          }, i);\n        })\n      })]\n    })]\n  });\n}\n\nexport default ResultTable;","map":null,"metadata":{},"sourceType":"module"}